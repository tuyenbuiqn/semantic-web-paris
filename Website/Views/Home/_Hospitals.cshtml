@using PagedList.Mvc
@model PagedList.IPagedList<Model.Entity.Hospital>
@{
    var cityName = ViewBag.SearchCityName;
}
<div class="clearfix"></div>
<div class="table-responsive">
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Label</th>
                @*<th>Coordination</th>*@
                @*<th>Uri</th>*@
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        <h4 class="label-title" style="width: 100%;" onclick="SetCenterByLatLng('@(item.OTId)_@(item.OId)',@item.Lat,@item.Lng)">@item.Label</h4>
                        <p style="font-size: 14px;padding-bottom: 0;margin-bottom: 0;margin-top: 3px;float: left;width: 100%;">
                            <i class="fa fa-map-marker"></i> @item.Address
                        </p>
                    </td>
                    @*<td>
                        @item.Coordination
                    </td>*@
                    @*<td>
                        @item.Uri
                    </td>*@
                </tr>
            }
        </tbody>
    </table>
</div>
<div id="HospitalPaper" style="display: inline-block; vertical-align: middle;" class="text-right">
    @Html.PagedListPager(
        Model,
        page => Url.Action("SearchHospital", new { page, cityName }),
        new PagedListRenderOptions()
        {
            MaximumPageNumbersToDisplay = 30,
            DisplayEllipsesWhenNotShowingAllPageNumbers = false,
            Display = PagedListDisplayMode.IfNeeded
        }
        )
</div>
<script>
    $(function () {
        var seen = {};
        //$('table tr').each(function () {
        //    var txt = $(this).text();
        //    if (seen[txt])
        //        $(this).remove();
        //    else
        //        seen[txt] = true;
        //});
        $("#HospitalPaper a").click(function () {
            if (this.href.length > 0) {
                $.ajax({
                    type: "POST",
                    url: this.href,
                    beforeSend: function () {
                    }
                }).done(function (data) {
                    $("#nav-hospital").html(data);
                }).fail(function (jqXHR, textStatus) {
                });
            };
            return false;
        });
    });
</script>